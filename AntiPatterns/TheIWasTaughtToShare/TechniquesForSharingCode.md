## 共有コードテクニック

このアンチパターンを避ける最良の方法は、単にサービス間でコードを共有しないことだと言うのは簡単です。
しかし、この章の冒頭で述べたように、実際には共有する必要のあるコードが何かしら出てくるでしょう。 その共有コードはどこに置かれるべきでしょうか。

図3-3は、共有コードの問題に対処する4つの基本的なテクニックについて記載しています。
共有プロジェクト、共有ライブラリ、複製、およびサービス統合です。

![モジュール共有テクニック](./img/3-3.png)  
図3-3. モジュール共有テクニック

共有プロジェクトを使用すると、共有プロジェクト内にある共有ソースコードと各サービスプロジェクトがコンパイル時にバインドされます。
これによって、ソフトウェアの変更と開発が容易になりますが、実行中に潜在的な問題や予想だにしない事象を引き起こして
アプリケーションをより脆弱にしてしまうため、私が最も好まない共有テクニックです。
共有プロジェクトの主な問題は、コミュニケーションとコントロールです。
どの共有モジュールが変更されたのか、そしてなぜ変更されたのかを把握することが難しいだけでなく、
その特定の変更を必要とするかどうかをコントロールすることも困難です。
あなたがマイクロサービスをリリースしようとしている時に、誰かが共有モジュールに急な変更を加えたことが分かり、
デプロイの前にコードの変更・再テストが必要になった場合を想像してみてください。