## 誤った判断

図6-1はサービスの粒度が細かすることが判明し、過度なサービス間通信によりパフォーマンスと信頼性に影響を与えているような一般的なシナリオを示しています。
このシナリオでは、アーキテクトや開発者はパフォーマンスと信頼性の問題を解決するためにサービスを単一もしくは、より粗い粒度のサービスへと統合するか決断を下します。

![細い粒度から粗い粒度への移行](img/6-1.png)

図6-1. 細い粒度から粗い粒度への移行

これは合理的な決断のように見えますが、これに伴うトレードオフは無視されています。
デプロイ、変更管理、およびテストはすべて、単一の粗いサービスに移行することによって影響を受けます。
問題は何が最も重要か？ということです。

先ほどとは逆の状況が発生する図6-2に示す例を考えてみましょう。
このシナリオでは、サービス粒度が粗すぎるため、全体的なテストの労力とデプロイの調整に影響を受けています。
この場合、アーキテクトや開発者は各サービスの範囲を縮小するために、サービスをより小さなサービスに分割するべきであるという判断を下し、
テストとデプロイを容易にします。

![粗い粒度から細い粒度への移行](img/6-2.png)

図6-2. 粗い粒度から細い粒度への移行

我々はアーキテクトや開発者のこの決断を賞賛するかもしれませんが、またもやトレードオフについては忘れ去られています。
この変更によってサービスは確かに、テストやデプロイは容易になりましたが、アプリケーションは突然、サービス間通信の増加によるパフォーマンスと信頼性の問題を経験することになります。
より重要なのはどちらなのでしょう？